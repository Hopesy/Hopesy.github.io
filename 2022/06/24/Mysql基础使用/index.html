
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mysql基础使用 - hopesy</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <link rel="stylesheet" href="/css/mouse.css">
    <meta name="keywords" content="hopesy,个人博客,"> 
    <meta name="description" content="hopesy的个人笔记,

MySql基础操作
下载安装https://blog.csdn.net/lingyiwin/article/details/81839435
https://www.runoob.com/mys,"> 
    <meta name="author" content="hopesy"> 
    <link rel="alternative" href="atom.xml" title="hopesy" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

    
<link rel="stylesheet" href="/css/diaspora.css">
<link rel="stylesheet" href="/css/site.css">

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>

    <!-- 代码块复制 -->
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard@latest/dist/clipboard.js"></script>

    <!-- 点击效果 -->
    
<meta name="generator" content="Hexo 6.1.0"></head>

<body class="loading">
    <span id="config-title" style="display:none">hopesy</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="https://hopesy.github.io"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">Mysql基础使用</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <!-- 帖子视图 -->

    <div class="post_cover" >
        
            <img src="https://hopesy.github.io/imags/cover/cover19.jpg" />
        
        <div class="post_cover_mask"></div>
        <div class="post_text">
            <h1>Mysql基础使用</h1>
            <div>
                <span>六月 24, 2022</span>

                
  <ul class="post-tags-list" itemprop="keywords"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/MySql/" rel="tag">MySql</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>


            </div>
        </div>
    </div>


<div class="article">
    <div class='main'>
        <!-- 帖子视图 -->
        
        
        <!-- 更新时间 -->
        <div class="updated">
            <div></div>
            <span>该文章更新于 2022.06.24</span>
        </div>

        <div class="content markdown">
            <meta name="referrer" content="no-referrer">

<h1 id="MySql基础操作"><a href="#MySql基础操作" class="headerlink" title="MySql基础操作"></a>MySql基础操作</h1><hr>
<h3 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lingyiwin/article/details/81839435">https://blog.csdn.net/lingyiwin/article/details/81839435</a></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/mysql/mysql-install.html">https://www.runoob.com/mysql/mysql-install.html</a></p>
<h3 id="1-create-database创建数据库"><a href="#1-create-database创建数据库" class="headerlink" title="1.create database创建数据库"></a>1.create database创建数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> dtabase test;</span><br></pre></td></tr></table></figure>

<h3 id="2-create-table创建数据表"><a href="#2-create-table创建数据表" class="headerlink" title="2.create table创建数据表"></a>2.create table创建数据表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `runoob_tbl`(</span><br><span class="line">   `runoob_id` <span class="type">INT</span> UNSIGNED AUTO_INCREMENT,</span><br><span class="line">   `runoob_title` <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   `runoob_author` <span class="type">VARCHAR</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   `submission_date` <span class="type">DATE</span>,</span><br><span class="line">   <span class="keyword">PRIMARY</span> KEY ( `runoob_id` )</span><br><span class="line">)ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果你不想字段为 NULL 可以设置字段的属性为 NOT NULL， 在操作数据库时如果输入该字段的数据为NULL  ，就会报错。</li>
</ul>
<p>AUTO_INCREMENT定义列为自增的属性，一般用于主键，数值会自动加1。</p>
<ul>
<li>PRIMARY KEY关键字用于定义列为主键。 您可以使用多列来定义主键，列间以逗号分隔。</li>
</ul>
<p>ENGINE 设置存储引擎，CHARSET 设置编码。</p>
<h3 id="3-表格相关操作"><a href="#3-表格相关操作" class="headerlink" title="3.表格相关操作"></a>3.表格相关操作</h3><p>3.1 <code>delete</code> 删除表内记录，对于 MyISAM 会立刻释放磁盘空间，InnoDB 不会释放磁盘空间</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span>  student <span class="keyword">where</span>  T_name <span class="operator">=</span> &quot;张三&quot;;<span class="operator">/</span><span class="operator">/</span>条件删除</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student;<span class="operator">/</span><span class="operator">/</span>删除全部数据，保留表结构</span><br></pre></td></tr></table></figure>

<p>3.2 <code>truncate</code>删除表全部数据，保留表结构，立刻释放磁盘空间 ，不管是 Innodb 和 MyISAM</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">truncate</span>  <span class="keyword">table</span>  student;</span><br></pre></td></tr></table></figure>

<p>3.3 <code>drop</code>删除表全部数据和表结构，立刻释放磁盘空间，不管是 Innodb 和 MyISAM;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> student;</span><br></pre></td></tr></table></figure>

<ul>
<li>当你不再需要该表时， 用 drop;</li>
</ul>
<p>当你仍要保留该表，但要删除所有记录时， 用 truncate</p>
<p>当你要删除部分记录时， 用 delete。</p>
<h3 id="4-inser-into插入数据"><a href="#4-inser-into插入数据" class="headerlink" title="4.inser into插入数据"></a>4.inser into插入数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> runoob_tbl (runoob_title, runoob_author, submission_date)</span><br><span class="line">                        <span class="keyword">VALUES</span></span><br><span class="line">                       (&quot;学习 PHP&quot;, &quot;菜鸟教程&quot;, NOW());<span class="operator">/</span><span class="operator">/</span>主键设置为自增，可以不规定主键列field</span><br><span class="line"> <span class="keyword">select</span><span class="operator">*</span>  <span class="keyword">from</span> runoob_tbl;<span class="operator">/</span><span class="operator">/</span>查询表格的每条数据搭配<span class="keyword">where</span>使用</span><br><span class="line"> <span class="keyword">select</span> <span class="built_in">count</span>( <span class="operator">*</span>) <span class="keyword">from</span> runoob_tbl;<span class="operator">/</span><span class="operator">/</span>返回查询到的记录数量</span><br><span class="line"> <span class="operator">/</span><span class="operator">/</span>插入多条数据</span><br><span class="line"> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name  (field1, field2,...fieldN)  <span class="keyword">VALUES</span>  (valueA1,valueA2,...valueAN),(valueB1,valueB2,...valueBN),(valueC1,valueC2,...valueCN)......;</span><br></pre></td></tr></table></figure>

<p>如果所有的列都要添加数据可以不规定列进行添加数据,此时如果主键设置为自增，可以写0或者null</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> runoob_tbl</span><br><span class="line">       <span class="keyword">VALUES</span></span><br><span class="line">     (<span class="number">0</span>, &quot;JAVA 教程&quot;, &quot;RUNOOB.COM&quot;, <span class="string">&#x27;2016-05-06&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="5-select查询数据"><a href="#5-select查询数据" class="headerlink" title="5.select查询数据"></a>5.select查询数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name,column_name</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line">[<span class="keyword">WHERE</span> Clause]</span><br><span class="line">[LIMIT N][ <span class="keyword">OFFSET</span> M]</span><br><span class="line">```<span class="operator">*</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">select</span> \<span class="operator">*</span> : 返回所有记录</span><br><span class="line"></span><br><span class="line"><span class="operator">*</span>   limit N : 返回 N 条记录<span class="operator">*</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">offset</span> M : 跳过 M 条记录, 默认 M<span class="operator">=</span><span class="number">0</span>, 单独使用似乎不起作用<span class="operator">*</span></span><br><span class="line"></span><br><span class="line">   limit N,M : 相当于 limit M <span class="keyword">offset</span> N , 从第 N 条记录开始, 返回 M 条记录</span><br><span class="line"></span><br><span class="line">```<span class="keyword">sql</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> <span class="keyword">table</span> LIMIT <span class="number">5</span>,<span class="number">10</span>; <span class="operator">/</span><span class="operator">/</span> 检索记录行 <span class="number">6</span><span class="number">-15</span></span><br><span class="line">  <span class="operator">/</span><span class="operator">/</span>为了检索从某一个偏移量到记录集的结束所有的记录行，可以指定第二个参数为 <span class="number">-1</span>：</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> <span class="keyword">table</span> LIMIT <span class="number">95</span>,<span class="number">-1</span>; <span class="operator">/</span><span class="operator">/</span> 检索记录行 <span class="number">96</span><span class="operator">-</span>last.</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>如果只给定一个参数，它表示返回最大的记录行数目：</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> <span class="keyword">table</span> LIMIT <span class="number">5</span>; <span class="operator">/</span><span class="operator">/</span>检索前 <span class="number">5</span> 个记录行</span><br><span class="line">  <span class="operator">/</span><span class="operator">/</span>换句话说，LIMIT n 等价于 LIMIT <span class="number">0</span>,n。</span><br><span class="line">Mysql 的分页查询语句的性能分析</span><br></pre></td></tr></table></figure>

<p>越往后分页，LIMIT 语句的偏移量就会越大，速度也会明显变慢。此时，我们可以通过子查询的方式来提高分页效率</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> articles <span class="keyword">WHERE</span>  id <span class="operator">&gt;=</span></span><br><span class="line"> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> articles  <span class="keyword">WHERE</span> category_id <span class="operator">=</span> <span class="number">123</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> id LIMIT <span class="number">10000</span>, <span class="number">1</span>) LIMIT <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>简单查询语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*websites  表名   NAME alexa url country  字段*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> websites;                      <span class="comment">/* 查询表所有数据 */</span></span><br><span class="line"><span class="keyword">SELECT</span> NAME <span class="keyword">FROM</span> websites;                   <span class="comment">/* 查询表字段数据 */</span></span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> websites <span class="keyword">where</span> name <span class="operator">=</span> &quot;广西&quot;;   <span class="comment">/* 查询表字段下条件数据 */</span></span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">from</span> websites <span class="keyword">where</span> name <span class="keyword">like</span> &quot;_o%&quot;; <span class="comment">/* 模糊查询表下数据* /</span></span><br><span class="line"><span class="comment">SELECT*  FROM websites where id BETWEEN &quot;1&quot; AND &quot;5&quot;;    /* 查询表下字段范围数据 */</span></span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> websites <span class="keyword">WHERE</span> name <span class="keyword">in</span> (&quot;广西&quot;,&quot;百度&quot;);    <span class="comment">/* 查询表字段下固定条件数据 */</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> country <span class="keyword">FROM</span> Websites;                  <span class="comment">/* 查询去重值 */</span></span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> Websites <span class="keyword">WHERE</span> country <span class="operator">=</span> &quot;CN&quot; <span class="keyword">AND</span> alexa <span class="operator">&gt;</span> <span class="number">50</span>;  <span class="comment">/*查询表下范围条件数据 */</span></span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> Websites <span class="keyword">WHERE</span> country <span class="operator">=</span> &quot;USA&quot; <span class="keyword">OR</span> country<span class="operator">=</span>&quot;sh&quot;; <span class="comment">/* 查询表下条件不同值 */</span></span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> Websites <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">desc</span> alexa;                      <span class="comment">/* 查询表下值排序结果 */</span></span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> Websites <span class="keyword">ORDER</span> <span class="keyword">BY</span> alexa <span class="keyword">DESC</span>;                 <span class="comment">/* 查询表下排序结果降序ESC升序 */</span></span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> Websites LIMIT <span class="number">2</span>;      <span class="comment">/* 查询表下范围数据 */</span></span><br><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">as</span> zzz <span class="keyword">from</span> websites;    <span class="comment">/*别名查询表下数据 */</span></span><br></pre></td></tr></table></figure>

<h3 id="6-Where语句"><a href="#6-Where语句" class="headerlink" title="6.Where语句"></a>6.Where语句</h3><blockquote>
<p>MySQL 的 WHERE 子句的字符串比较是不区分大小写的。 你可以使用 BINARY 关键字来设定 WHERE 子句的字符串比较是区分大小写的</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">from</span> runoob_tbl <span class="keyword">WHERE</span> <span class="type">BINARY</span> runoob_author<span class="operator">=</span><span class="string">&#x27;runoob.com&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> field1, field2,...fieldN <span class="keyword">FROM</span> table_name1, table_name2...</span><br><span class="line">[<span class="keyword">WHERE</span> condition1 [<span class="keyword">AND</span> [<span class="keyword">OR</span>]] condition2.....</span><br><span class="line">```<span class="operator">*</span></span><br><span class="line"></span><br><span class="line">   询语句中你可以使用一个或者多个表，表之间使用逗号, 分割，并使用<span class="keyword">WHERE</span>语句来设定查询条件。<span class="operator">*</span></span><br><span class="line"></span><br><span class="line">   你可以在 <span class="keyword">WHERE</span> 子句中指定任何条件。<span class="operator">*</span></span><br><span class="line"></span><br><span class="line">   你可以使用 <span class="keyword">AND</span> 或者 <span class="keyword">OR</span> 指定一个或多个条件。<span class="operator">*</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">WHERE</span> 子句也可以运用于 <span class="keyword">SQL</span> 的 <span class="keyword">DELETE</span> 或者 <span class="keyword">UPDATE</span> 命令。</span><br><span class="line"></span><br><span class="line">```<span class="keyword">sql</span></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>子语句的执行顺序</span><br><span class="line"><span class="keyword">FROM</span>, including JOINs –<span class="operator">&gt;</span><span class="keyword">where</span> –<span class="operator">&gt;</span> <span class="keyword">group</span> <span class="keyword">by</span>–<span class="operator">&gt;</span> <span class="keyword">having</span>–<span class="operator">&gt;</span><span class="keyword">WINDOW</span> functions–<span class="operator">&gt;</span><span class="keyword">SELECT</span>–<span class="operator">&gt;</span>DISTINC–<span class="operator">&gt;</span>UNIONT–<span class="operator">&gt;</span> <span class="keyword">order</span> <span class="keyword">by</span>–<span class="operator">&gt;</span> LIMIT <span class="keyword">and</span> <span class="keyword">OFFSET</span></span><br></pre></td></tr></table></figure>

<h3 id="7-UPDATE更新数据"><a href="#7-UPDATE更新数据" class="headerlink" title="7.UPDATE更新数据"></a>7.UPDATE更新数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>例子</span><br><span class="line"><span class="keyword">update</span> students <span class="keyword">set</span> name<span class="operator">=</span>&quot;小明&quot;, age<span class="operator">=</span><span class="number">19</span> <span class="keyword">where</span> tel<span class="operator">=</span>&quot;13288097888&quot;;</span><br><span class="line"><span class="keyword">update</span> students <span class="keyword">set</span> age<span class="operator">=</span>age<span class="operator">+</span><span class="number">1</span> <span class="keyword">where</span> id<span class="operator">=</span><span class="number">5</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> runoob_tbl <span class="keyword">SET</span> runoob_title <span class="operator">=</span> REPLACE(runoob_title, <span class="string">&#x27;C++&#x27;</span>, <span class="string">&#x27;Python&#x27;</span>) <span class="keyword">where</span></span><br><span class="line">runoob_id <span class="operator">=</span> <span class="number">3</span>;<span class="operator">/</span><span class="operator">/</span>和replace函数配合使用</span><br></pre></td></tr></table></figure>

<h3 id="8-DELETE-from删除数据"><a href="#8-DELETE-from删除数据" class="headerlink" title="8.DELETE from删除数据"></a>8.DELETE from删除数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>例子</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> runoob_tbl <span class="keyword">WHERE</span> runoob_id<span class="operator">=</span><span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>注意：不使用 WHERE 子句将数据表的全部数据进行更新，所以要慎重。</p>
<h3 id="9-like子语句"><a href="#9-like子语句" class="headerlink" title="9.like子语句"></a>9.like子语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>例子</span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">from</span> runoob_tbl  <span class="keyword">WHERE</span> runoob_author <span class="keyword">LIKE</span> <span class="string">&#x27;%COM&#x27;</span>;</span><br><span class="line"><span class="string">&#x27;%a&#x27;</span>     <span class="operator">/</span><span class="operator">/</span>以a结尾的数据</span><br><span class="line"><span class="string">&#x27;a%&#x27;</span>     <span class="operator">/</span><span class="operator">/</span>以a开头的数据</span><br><span class="line"><span class="string">&#x27;%a%&#x27;</span>    <span class="operator">/</span><span class="operator">/</span>含有a的数据</span><br><span class="line"><span class="string">&#x27;_a_&#x27;</span>    <span class="operator">/</span><span class="operator">/</span>三位且中间字母是a的</span><br><span class="line"><span class="string">&#x27;_a&#x27;</span>     <span class="operator">/</span><span class="operator">/</span>两位且结尾字母是a的</span><br><span class="line"><span class="string">&#x27;a_&#x27;</span>     <span class="operator">/</span><span class="operator">/</span>两位且开头字母是a的</span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> position <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;%java%&#x27;</span>;</span><br><span class="line">```<span class="operator">*</span></span><br><span class="line"></span><br><span class="line">   `<span class="operator">%</span>`：表示任意 <span class="number">0</span> 个或多个字符。可匹配任意类型和长度的字符，有些情况下若是中文，请使用两个百分号（<span class="operator">%</span><span class="operator">%</span>）表示。<span class="operator">*</span></span><br><span class="line"></span><br><span class="line">   ` _`：表示任意单个字符。匹配单个任意字符，它常用来限制表达式的字符长度语句。</span><br><span class="line"></span><br><span class="line"><span class="operator">*</span>   `[]`：表示括号内所列字符中的一个（类似正则表达式）。指定一个字符、字符串或范围，要求所匹配对象为它们中的任一个。<span class="operator">*</span></span><br><span class="line"></span><br><span class="line">   `[<span class="operator">^</span>]` ：表示不在括号所列之内的单个字符。其取值和 \[] 相同，但它要求所匹配对象为指定字符以外的任一个字符。<span class="operator">*</span></span><br><span class="line"></span><br><span class="line">   查询内容包含通配符时,由于通配符的缘故，导致我们查询特殊字符 “<span class="operator">%</span>”、“\ _”、“\[” 的语句无法正常实现，而把特殊字符用 “\[ ]” 括起便可正常查询。</span><br><span class="line"></span><br><span class="line">### <span class="number">10.</span><span class="keyword">UNION</span>操作符</span><br><span class="line"></span><br><span class="line"><span class="operator">*</span>   <span class="keyword">UNION</span> 语句：用于将不同表中相同列中查询的数据展示出来；（不包括重复数据）<span class="operator">*</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">UNION</span> <span class="keyword">ALL</span> 语句：用于将不同表中相同列中查询的数据展示出来；（包括重复数据）</span><br><span class="line"></span><br><span class="line">```<span class="keyword">sql</span></span><br><span class="line"><span class="keyword">SELECT</span> 列名称 <span class="keyword">FROM</span> 表名称 <span class="keyword">UNION</span> <span class="keyword">SELECT</span> 列名称 <span class="keyword">FROM</span> 表名称 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 列名称；</span><br><span class="line"><span class="keyword">SELECT</span> 列名称 <span class="keyword">FROM</span> 表名称 <span class="keyword">UNION</span> <span class="keyword">ALL</span> <span class="keyword">SELECT</span> 列名称 <span class="keyword">FROM</span> 表名称 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 列名称；</span><br><span class="line"><span class="keyword">SELECT</span> country <span class="keyword">FROM</span> Websites <span class="keyword">UNION</span> <span class="keyword">ALL</span> <span class="keyword">SELECT</span> country <span class="keyword">FROM</span> apps <span class="keyword">ORDER</span> <span class="keyword">BY</span> country;</span><br></pre></td></tr></table></figure>

<h3 id="11-ORDER-BY排序"><a href="#11-ORDER-BY排序" class="headerlink" title="11.ORDER BY排序"></a>11.ORDER BY排序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>后面可以跟<span class="keyword">where</span>子语句</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>使用 <span class="keyword">ASC</span> 或 <span class="keyword">DESC</span> 关键字来设置查询结果是按升序或降序排列。 默认情况下，它是按升序排列</span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">from</span> runoob_tbl <span class="keyword">ORDER</span> <span class="keyword">BY</span> submission_date <span class="keyword">ASC</span>, sunId <span class="keyword">DESC</span> ;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>如果字符集采用的是 gbk(汉字编码字符集)，直接在查询语句后边添加 <span class="keyword">ORDER</span> <span class="keyword">BY</span>：</span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> runoob_tbl <span class="keyword">ORDER</span> <span class="keyword">BY</span> runoob_title;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>如果字符集采用的是 utf8(万国码)，需要先对字段进行转码然后排序：</span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> runoob_tbl <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">CONVERT</span>(runoob_title <span class="keyword">using</span> gbk);</span><br></pre></td></tr></table></figure>

<h3 id="12-GROUP-BY语句"><a href="#12-GROUP-BY语句" class="headerlink" title="12.GROUP BY语句"></a>12.GROUP BY语句</h3><blockquote>
<p>GROUP BY 语句根据一个或多个列对结果集进行分组在分组的列上我们可以使用 COUNT, SUM, AVG,等函数。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>创建数据库</span><br><span class="line"><span class="keyword">SET</span> NAMES utf8;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `employee_tbl`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `employee_tbl` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  `<span class="type">date</span>` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `singin` tinyint(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;登录次数&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `employee_tbl` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;小明&#x27;</span>, <span class="string">&#x27;2016-04-22 15:25:33&#x27;</span>, <span class="string">&#x27;1&#x27;</span>), (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;小王&#x27;</span>, <span class="string">&#x27;2016-04-20 15:25:47&#x27;</span>, <span class="string">&#x27;3&#x27;</span>), (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;小丽&#x27;</span>, <span class="string">&#x27;2016-04-19 15:26:02&#x27;</span>, <span class="string">&#x27;2&#x27;</span>), (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;小王&#x27;</span>, <span class="string">&#x27;2016-04-07 15:26:14&#x27;</span>, <span class="string">&#x27;4&#x27;</span>), (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;小明&#x27;</span>, <span class="string">&#x27;2016-04-11 15:26:40&#x27;</span>, <span class="string">&#x27;4&#x27;</span>), (<span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;小明&#x27;</span>, <span class="string">&#x27;2016-04-04 15:26:54&#x27;</span>, <span class="string">&#x27;2&#x27;</span>);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employee_tbl;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> <span class="type">date</span>                <span class="operator">|</span> singin <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------------------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> 小明 <span class="operator">|</span> <span class="number">2016</span><span class="number">-04</span><span class="number">-22</span> <span class="number">15</span>:<span class="number">25</span>:<span class="number">33</span> <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> 小王 <span class="operator">|</span> <span class="number">2016</span><span class="number">-04</span><span class="number">-20</span> <span class="number">15</span>:<span class="number">25</span>:<span class="number">47</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 小丽 <span class="operator">|</span> <span class="number">2016</span><span class="number">-04</span><span class="number">-19</span> <span class="number">15</span>:<span class="number">26</span>:<span class="number">02</span> <span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> 小王 <span class="operator">|</span> <span class="number">2016</span><span class="number">-04</span><span class="number">-07</span> <span class="number">15</span>:<span class="number">26</span>:<span class="number">14</span> <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> 小明 <span class="operator">|</span> <span class="number">2016</span><span class="number">-04</span><span class="number">-11</span> <span class="number">15</span>:<span class="number">26</span>:<span class="number">40</span> <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> 小明 <span class="operator">|</span> <span class="number">2016</span><span class="number">-04</span><span class="number">-04</span> <span class="number">15</span>:<span class="number">26</span>:<span class="number">54</span> <span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------------------+--------+</span></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>接下来我们使用 <span class="keyword">GROUP</span> <span class="keyword">BY</span> 语句 将数据表按名字进行分组，并统计每个人有多少条记录：</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, <span class="built_in">COUNT</span>( <span class="operator">*</span>) <span class="keyword">FROM</span>   employee_tbl <span class="keyword">GROUP</span> <span class="keyword">BY</span> name;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> <span class="built_in">COUNT</span>( <span class="operator">*</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br><span class="line"><span class="operator">|</span> 小丽 <span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小明 <span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小王 <span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+----------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span><span class="keyword">WITH</span> <span class="keyword">ROLLUP</span> 可以实现在分组统计数据基础上再进行相同的统计（SUM,AVG,COUNT…）。</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name, <span class="built_in">SUM</span>(singin) <span class="keyword">as</span> singin_count <span class="keyword">FROM</span>  employee_tbl <span class="keyword">GROUP</span> <span class="keyword">BY</span> name <span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------------+</span></span><br><span class="line"><span class="operator">|</span> name   <span class="operator">|</span> singin_count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 小丽 <span class="operator">|</span>            <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小明 <span class="operator">|</span>            <span class="number">7</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 小王 <span class="operator">|</span>            <span class="number">7</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span>           <span class="number">16</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------------+</span></span><br></pre></td></tr></table></figure>

<h3 id="13-JOIN在多个表查询数据，默认为INNER"><a href="#13-JOIN在多个表查询数据，默认为INNER" class="headerlink" title="13.JOIN在多个表查询数据，默认为INNER"></a>13.JOIN在多个表查询数据，默认为INNER</h3><ul>
<li>INNER JOIN（内连接,或等值连接）：获取两个表中字段匹配关系的记录。</li>
</ul>
<p>LEFT JOIN（左连接）：获取左表所有记录，即使右表没有对应匹配的记录。</p>
<p>RIGHT JOIN（右连接）：与 LEFT JOIN 相反，用于获取右表所有记录，即使左表没有对应匹配的记录。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> tcount_tbl;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> runoob_author <span class="operator">|</span> runoob_count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 菜鸟教程  <span class="operator">|</span> <span class="number">10</span>           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> RUNOOB.COM    <span class="operator">|</span> <span class="number">20</span>           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Google        <span class="operator">|</span> <span class="number">22</span>           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+--------------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> runoob_tbl;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+---------------+---------------+-----------------+</span></span><br><span class="line"><span class="operator">|</span> runoob_id <span class="operator">|</span> runoob_title  <span class="operator">|</span> runoob_author <span class="operator">|</span> submission_date <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+---------------+---------------+-----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>         <span class="operator">|</span> 学习 PHP    <span class="operator">|</span> 菜鸟教程  <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-12</span>      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span>         <span class="operator">|</span> 学习 MySQL  <span class="operator">|</span> 菜鸟教程  <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-12</span>      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span>         <span class="operator">|</span> 学习 Java   <span class="operator">|</span> RUNOOB.COM    <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-01</span>      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span>         <span class="operator">|</span> 学习 Python <span class="operator">|</span> RUNOOB.COM    <span class="operator">|</span> <span class="number">2016</span><span class="number">-03</span><span class="number">-06</span>      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span>         <span class="operator">|</span> 学习 C      <span class="operator">|</span> FK            <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-05</span>      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+---------------+---------------+-----------------+</span></span><br><span class="line"><span class="keyword">SELECT</span> a.runoob_id, a.runoob_author, b.runoob_count <span class="keyword">FROM</span> runoob_tbl a <span class="keyword">INNER</span> <span class="keyword">JOIN</span> tcount_tbl b <span class="keyword">ON</span> a.runoob_author <span class="operator">=</span> b.runoob_author;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> a.runoob_id <span class="operator">|</span> a.runoob_author <span class="operator">|</span> b.runoob_count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>           <span class="operator">|</span> 菜鸟教程    <span class="operator">|</span> <span class="number">10</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span>           <span class="operator">|</span> 菜鸟教程    <span class="operator">|</span> <span class="number">10</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span>           <span class="operator">|</span> RUNOOB.COM      <span class="operator">|</span> <span class="number">20</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span>           <span class="operator">|</span> RUNOOB.COM      <span class="operator">|</span> <span class="number">20</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line"> <span class="keyword">SELECT</span> a.runoob_id, a.runoob_author, b.runoob_count <span class="keyword">FROM</span> runoob_tbl a <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> tcount_tbl b <span class="keyword">ON</span> a.runoob_author <span class="operator">=</span> b.runoob_author;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> a.runoob_id <span class="operator">|</span> a.runoob_author <span class="operator">|</span> b.runoob_count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>           <span class="operator">|</span> 菜鸟教程    <span class="operator">|</span> <span class="number">10</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span>           <span class="operator">|</span> 菜鸟教程    <span class="operator">|</span> <span class="number">10</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span>           <span class="operator">|</span> RUNOOB.COM      <span class="operator">|</span> <span class="number">20</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span>           <span class="operator">|</span> RUNOOB.COM      <span class="operator">|</span> <span class="number">20</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span>           <span class="operator">|</span> FK              <span class="operator">|</span> <span class="keyword">NULL</span>           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line"><span class="keyword">SELECT</span> a.runoob_id, a.runoob_author, b.runoob_count <span class="keyword">FROM</span> runoob_tbl a <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> tcount_tbl b <span class="keyword">ON</span> a.runoob_author <span class="operator">=</span> b.runoob_author;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> a.runoob_id <span class="operator">|</span> a.runoob_author <span class="operator">|</span> b.runoob_count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>           <span class="operator">|</span> 菜鸟教程    <span class="operator">|</span> <span class="number">10</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span>           <span class="operator">|</span> 菜鸟教程    <span class="operator">|</span> <span class="number">10</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span>           <span class="operator">|</span> RUNOOB.COM      <span class="operator">|</span> <span class="number">20</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span>           <span class="operator">|</span> RUNOOB.COM      <span class="operator">|</span> <span class="number">20</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span>        <span class="operator">|</span> <span class="keyword">NULL</span>            <span class="operator">|</span> <span class="number">22</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------------+----------------+</span></span><br></pre></td></tr></table></figure>

<h3 id="14-NULL值处理"><a href="#14-NULL值处理" class="headerlink" title="14.NULL值处理"></a>14.NULL值处理</h3><ol>
<li><p>IS NULL: 当列的值是 NULL,此运算符返回 true。</p>
</li>
<li><p>IS NOT NULL: 当列的值不为 NULL, 运算符返回 true。</p>
</li>
<li><p>&lt;&#x3D;&gt;: 比较操作符（不同于 &#x3D; 运算符），当比较的的两个值相等或者都为 NULL 时返回 true。</p>
</li>
</ol>
<p>你不能使用 &#x3D; NULL 或 !&#x3D; NULL 在列中查找 NULL 值 。在 MySQL 中，NULL 值与任何其它值的比较（即使是 NULL）永远返回 NULL，即 NULL &#x3D; NULL 返回 NULL 。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> , columnName1<span class="operator">+</span>ifnull(columnName2,<span class="number">0</span>) <span class="keyword">from</span> tableName;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>columnName1，columnName2 为 <span class="type">int</span> 型，当 columnName2 中，有值为 <span class="keyword">null</span> <span class="operator">/</span><span class="operator">/</span>时，columnName1<span class="operator">+</span>columnName2<span class="operator">=</span><span class="keyword">null</span>， ifnull(columnName2,<span class="number">0</span>) 把 columnName2 中 <span class="keyword">null</span> 值转为 <span class="number">0</span>。</span><br><span class="line"> <span class="keyword">SELECT</span><span class="operator">*</span>  <span class="keyword">FROM</span> runoob_test_tbl <span class="keyword">WHERE</span> runoob_count <span class="operator">=</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>不起作用，结果为空<span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> runoob_test_tbl <span class="keyword">WHERE</span> runoob_count <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> runoob_author <span class="operator">|</span> runoob_count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 菜鸟教程  <span class="operator">|</span> <span class="keyword">NULL</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Google        <span class="operator">|</span> <span class="keyword">NULL</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+--------------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="15-正则表达式"><a href="#15-正则表达式" class="headerlink" title="15.正则表达式"></a>15.正则表达式</h3><ul>
<li><code>^</code>	匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 ‘\n’ 或 ‘\r’ 之后的位置。</li>
</ul>
<p><code>$</code>	匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 ‘\n’ 或 ‘\r’ 之前的位置。</p>
<p><code>.</code>	匹配除 “\n” 之外的任何单个字符。要匹配包括 ‘\n’ 在内的任何字符，请使用像 ‘[.\n]’ 的模式。</p>
<p><code>[...]</code>	字符集合。匹配所包含的任意一个字符。例如， ‘[abc]’ 可以匹配 “plain” 中的 ‘a’。</p>
<p><code>[^...]</code>	负值字符集合。匹配未包含的任意字符。例如， ‘[^abc]’ 可以匹配 “plain” 中的’p’。</p>
<p><code>p1|p2|p3</code>	匹配 p1 或 p2 或 p3。例如，’z|food’ 能匹配 “z” 或 “food”。’(z|f)ood’ 则匹配 “zood” 或 “food”。</p>
<p><code>*</code>	匹配前面的子表达式零次或多次。例如，zo 能匹配 “z” 以及 “zoo”。 等价于{0,}。</p>
<ul>
<li><code>+</code>	匹配前面的子表达式一次或多次。例如，’zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}。</li>
</ul>
<p><code>&#123;n&#125;</code>	n 是一个非负整数。匹配确定的 n 次。例如，’o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o。</p>
<p><code>&#123;n,m&#125;</code>	m 和 n 均为非负整数，其中n &lt;&#x3D; m。最少匹配 n 次且最多匹配 m 次。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>查找name字段中以<span class="string">&#x27;st&#x27;</span>为开头的所有数据：</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> person_tbl <span class="keyword">WHERE</span> name REGEXP <span class="string">&#x27;^st&#x27;</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>查找name字段中以<span class="string">&#x27;ok&#x27;</span>为结尾的所有数据：</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> person_tbl <span class="keyword">WHERE</span> name REGEXP <span class="string">&#x27;ok$&#x27;</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>查找name字段中包含<span class="string">&#x27;mar&#x27;</span>字符串的所有数据：</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> person_tbl <span class="keyword">WHERE</span> name REGEXP <span class="string">&#x27;mar&#x27;</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>查找name字段中以元音字符开头或以<span class="string">&#x27;ok&#x27;</span>字符串结尾的所有数据：</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> person_tbl <span class="keyword">WHERE</span> name REGEXP <span class="string">&#x27;^[aeiou]|ok$&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="16-事务"><a href="#16-事务" class="headerlink" title="16.事务"></a>16.事务</h3><ol>
<li><p>在 MySQL 中只有使用了 Innodb 数据库引擎的数据库或表才支持事务。</p>
</li>
<li><p>事务处理可以用来维护数据库的完整性，保证成批的 SQL 语句要么全部执行，要么全部不执行。</p>
</li>
<li><p>事务用来管理 insert,update,delete 语句</p>
</li>
<li><p>原子性；一致性；隔离性；持久性</p>
</li>
<li><p>在 MySQL 命令行的默认设置下，事务都是自动提交的，即执行 SQL 语句后就会马上执行 COMMIT 操作。因此要显式地开启一个事务务须使用命令 BEGIN 或 START TRANSACTION，或者执行命令 SET AUTOCOMMIT&#x3D;0，用来禁止使用当前会话的自动提交。</p>
</li>
</ol>
<p>BEGIN 或 START TRANSACTION 显式地开启一个事务；</p>
<p>COMMIT 也可以使用 COMMIT WORK，不过二者是等价的。COMMIT 会提交事务，并使已对数据库进行的所有修改成为永久性的；</p>
<p>ROLLBACK 也可以使用 ROLLBACK WORK，不过二者是等价的。回滚会结束用户的事务，并撤销正在进行的所有未提交的修改；</p>
<p>SAVEPOINT identifier，SAVEPOINT 允许在事务中创建一个保存点，一个事务中可以有多个 SAVEPOINT；</p>
<p>RELEASE SAVEPOINT identifier 删除一个事务的保存点，当没有指定的保存点时，执行该语句会抛出一个异常；</p>
<p>ROLLBACK TO identifier 把事务回滚到标记点；</p>
<p>SET TRANSACTION 用来设置事务的隔离级别。InnoDB 存储引擎提供事务的隔离级别有READ UNCOMMITTED、READ COMMITTED、REPEATABLE READ 和 SERIALIZABLE。</p>
<h3 id="17-ALTER命令"><a href="#17-ALTER命令" class="headerlink" title="17.ALTER命令"></a>17.ALTER命令</h3><blockquote>
<p>当我们需要修改数据表名或者修改数据表字段时，就需要使用到MySQL ALTER命令。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>使用了 <span class="keyword">ALTER</span> 命令及 <span class="keyword">DROP</span> 子句来删除以上创建表的 i 字段</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl  <span class="keyword">DROP</span> i;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>使用 <span class="keyword">ADD</span> 子句来向数据表中添加列</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ADD</span> i <span class="type">INT</span>;</span><br><span class="line"><span class="keyword">SHOW</span> COLUMNS <span class="keyword">FROM</span> testalter_tbl; ;<span class="operator">/</span><span class="operator">/</span>查看表结构</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>如果你需要指定新增字段的位置，可以使用MySQL提供的关键字 <span class="keyword">FIRST</span> (设定位第一列)， AFTER 字段名（设定位于某个字段之后）。</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">DROP</span> i;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ADD</span> i <span class="type">INT</span> <span class="keyword">FIRST</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">DROP</span> i;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ADD</span> i <span class="type">INT</span> AFTER c;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>需要修改字段类型及名称, 你可以在<span class="keyword">ALTER</span>命令中使用`MODIFY`或 `CHANGE`子句 。</span><br><span class="line"> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl MODIFY c <span class="type">CHAR</span>(<span class="number">10</span>);</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>使用 CHANGE 子句, 语法有很大的不同。 在 CHANGE 关键字之后，紧跟着的是你要修改的字段名，然后指定新字段名及类型</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl CHANGE i j <span class="type">BIGINT</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>修改字段时，你可以指定是否包含值或者是否设置默认值</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl</span><br><span class="line">MODIFY j <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">100</span>;<span class="operator">/</span><span class="operator">/</span>如果你不设置默认值，MySQL会自动设置该字段默认为 <span class="keyword">NULL</span>。</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>可以使用 <span class="keyword">ALTER</span> 来修改字段的默认值</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ALTER</span> i <span class="keyword">SET</span> <span class="keyword">DEFAULT</span> <span class="number">1000</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>可以使用 <span class="keyword">ALTER</span> 命令及 <span class="keyword">DROP</span>子句来删除字段的默认值;删除之后就变成<span class="keyword">NULL</span></span><br><span class="line"> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ALTER</span> i <span class="keyword">DROP</span> <span class="keyword">DEFAULT</span>;</span><br><span class="line"> <span class="operator">/</span><span class="operator">/</span>修改数据表类型，可以使用 <span class="keyword">ALTER</span> 命令及 TYPE 子句来完成。尝试以下实例，我们将表 testalter_tbl 的类型修改为 MYISAM</span><br><span class="line"> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl ENGINE <span class="operator">=</span> MYISAM;</span><br><span class="line"> <span class="operator">/</span><span class="operator">/</span>查看数据表类型</span><br><span class="line">  <span class="keyword">SHOW</span> <span class="keyword">TABLE</span> STATUS <span class="keyword">LIKE</span> <span class="string">&#x27;testalter_tbl&#x27;</span>\G</span><br><span class="line">  <span class="operator">/</span><span class="operator">/</span>如果需要修改数据表的名称，可以在 <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 语句中使用 RENAME 子句来实现。</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl RENAME <span class="keyword">TO</span> alter_tbl;</span><br><span class="line"> <span class="operator">/</span><span class="operator">/</span>删除外键约束：keyName是外键别名</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tableName <span class="keyword">drop</span> <span class="keyword">foreign</span> key keyName;</span><br></pre></td></tr></table></figure>

<h3 id="18-索引"><a href="#18-索引" class="headerlink" title="18.索引"></a>18.索引</h3><blockquote>
<p>MySQL索引的建立对于MySQL的高效运行是很重要的，索引可以大大提高MySQL的检索速度。索引分单列索引和组合索引。单列索引，即一个索引只包含单个列，一个表可以有多个单列索引，但这不是组合索引。组合索引，即一个索引包含多个列。实际上，索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>创建普通索引</span><br><span class="line"><span class="keyword">CREATE</span> INDEX indexName <span class="keyword">ON</span> table_name (column_name)</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>修改表结构(添加索引)</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> tableName <span class="keyword">ADD</span> INDEX indexName(columnName)</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>创建表的时候直接指定索引</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(</span><br><span class="line">ID <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">username <span class="type">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">INDEX [indexName] (username(length))</span><br><span class="line">);</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>删除索引</span><br><span class="line"><span class="keyword">DROP</span> INDEX [indexName] <span class="keyword">ON</span> mytable;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>创建唯一索引。索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX indexName <span class="keyword">ON</span> mytable(username(length))</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>修改表结构</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> mytable <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> [indexName] (username(length))</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>创建表的时候直接指定</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(</span><br><span class="line"> ID <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"> username <span class="type">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"><span class="keyword">UNIQUE</span> [indexName] (username(length))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>使用ALTER 命令添加和删除索引</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (column_list):</span><br><span class="line">   该语句添加一个主键，这意味着索引值必须是唯一的，且不能为<span class="keyword">NULL</span>。</span><br><span class="line">   <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> index_name (column_list):</span><br><span class="line">  这条语句创建索引的值必须是唯一的（除了<span class="keyword">NULL</span>外，<span class="keyword">NULL</span>可能会出现多次）。</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> INDEX index_name (column_list): 添加普通索引，索引值可出现多次。</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> FULLTEXT index_name (column_list):该语句指定了索引为 FULLTEXT ，用于全文索引。</span><br><span class="line"></span><br><span class="line">```<span class="operator">*</span><span class="operator">*</span></span><br><span class="line"></span><br><span class="line">使用 <span class="keyword">ALTER</span> 命令添加和删除主键<span class="operator">*</span><span class="operator">*</span></span><br><span class="line"></span><br><span class="line">```<span class="keyword">sql</span></span><br><span class="line"></span><br><span class="line">主键作用于列上（可以一个列或多个列联合主键），添加主键索引时，你需要确保该主键默认不为空（<span class="keyword">NOT</span> <span class="keyword">NULL</span>）。实例如下：</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl MODIFY i <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (i);</span><br><span class="line">你也可以使用 <span class="keyword">ALTER</span> 命令删除主键：</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line">删除主键时只需指定<span class="keyword">PRIMARY</span> KEY，但在删除索引时，你必须知道索引名。</span><br><span class="line"> 显示索引信息</span><br><span class="line">你可以使用 <span class="keyword">SHOW</span> INDEX 命令来列出表中的相关的索引信息。可以通过添加 \G 来格式化输出信息。</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> table_name; \G</span><br></pre></td></tr></table></figure>

<h3 id="19-临时表"><a href="#19-临时表" class="headerlink" title="19.临时表"></a>19.临时表</h3><blockquote>
<p>MySQL 临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql会自动删除表并释放所有空间。当你使用 SHOW TABLES命令显示数据表列表时，你将无法看到 SalesSummary表。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> SalesSummary (</span><br><span class="line">   product_name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">  , total_sales <span class="type">DECIMAL</span>(<span class="number">12</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0.00</span></span><br><span class="line">   , avg_unit_price <span class="type">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0.00</span></span><br><span class="line">   , total_units_sold <span class="type">INT</span> UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="20-复制表"><a href="#20-复制表" class="headerlink" title="20.复制表"></a>20.复制表</h3><ol>
<li><p>使用 SHOW CREATE TABLE 命令获取创建数据表(CREATE TABLE)语句，该语句包含了原数据表的结构，索引等。</p>
</li>
<li><p>复制以下命令显示的SQL语句，修改数据表名，并执行SQL语句，通过以上命令 将完全的复制数据表结构。</p>
</li>
<li><p>如果你想复制表的内容，你就可以使用 INSERT INTO … SELECT 语句来实现。</p>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>步骤一：获取数据表的完整结构。</span><br><span class="line"> <span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> runoob_tbl \G;</span><br><span class="line">        <span class="keyword">Table</span>: runoob_tbl</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span>: <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `runoob_tbl` (</span><br><span class="line">  `runoob_id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> auto_increment,</span><br><span class="line">  `runoob_title` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  `runoob_author` <span class="type">varchar</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  `submission_date` <span class="type">date</span> <span class="keyword">default</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY  (`runoob_id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `AUTHOR_INDEX` (`runoob_author`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>步骤二:修改<span class="keyword">SQL</span>语句的数据表名，并执行<span class="keyword">SQL</span>语句。</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `clone_tbl` (</span><br><span class="line">   `runoob_id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> auto_increment,</span><br><span class="line">  `runoob_title` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">   `runoob_author` <span class="type">varchar</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line"> `submission_date` <span class="type">date</span> <span class="keyword">default</span> <span class="keyword">NULL</span>,</span><br><span class="line">   <span class="keyword">PRIMARY</span> KEY  (`runoob_id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `AUTHOR_INDEX` (`runoob_author`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>步骤三：拷贝数据表的数据</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> clone_tbl (runoob_id,</span><br><span class="line">                     runoob_title,</span><br><span class="line">                   runoob_author,</span><br><span class="line">                    submission_date)</span><br><span class="line"><span class="keyword">SELECT</span> runoob_id,runoob_title,</span><br><span class="line">     runoob_author,submission_date</span><br><span class="line"> <span class="keyword">FROM</span> runoob_tbl;</span><br></pre></td></tr></table></figure>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="http://domain.com/awesome.mp3">
            </audio>
            
        </div>
        </br></br></br>
        <center style="color: #cccccc;">-&nbsp;&nbsp;&nbsp;END&nbsp;&nbsp;&nbsp;-</center>
        
    <div id='gitalk-container' class="comment link"
		data-enable='true'
        data-ae='true'
        data-ci='7c40969f9ae1f09ec22f'
        data-cs='d6dce2a6144e46354524fc0abcff5bf854690061'
        data-r='hopesy.github.io'
        data-o='hopesy'
        data-a='hopesy'
        data-d='true'
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
    <!--�������Ц����-->
<script type="text/javascript" src="\js\FunnyTitle.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":-15,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>
<script src="/js/codeCopy.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
