
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ajax请求 - hopesy</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <link rel="stylesheet" href="/css/mouse.css">
    <meta name="keywords" content="hopesy,个人博客,"> 
    <meta name="description" content="hopesy的个人笔记,

AJAX请求AJAX
AJAX 不是新的编程语言，而是一种使用现有标准的新方法。AJAX 是一种用于创建快速动态网页的技术。通过在后台与服务器进行少量数据交换，AJAX 可以使网页实现异步更新。,"> 
    <meta name="author" content="hopesy"> 
    <link rel="alternative" href="atom.xml" title="hopesy" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

    
<link rel="stylesheet" href="/css/diaspora.css">
<link rel="stylesheet" href="/css/site.css">

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>

    <!-- 代码块复制 -->
    <script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard@latest/dist/clipboard.js"></script>

    <!-- 点击效果 -->
    
<meta name="generator" content="Hexo 6.1.0"></head>

<body class="loading">
    <span id="config-title" style="display:none">hopesy</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="https://hopesy.github.io"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">Ajax请求</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <!-- 帖子视图 -->

    <div class="post_cover" >
        
            <img src="https://hopesy.github.io/imags/cover/cover17.jpg" />
        
        <div class="post_cover_mask"></div>
        <div class="post_text">
            <h1>Ajax请求</h1>
            <div>
                <span>六月 24, 2022</span>

                
  <ul class="post-tags-list" itemprop="keywords"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/Ajax/" rel="tag">Ajax</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/http/" rel="tag">http</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a></li></ul>


            </div>
        </div>
    </div>


<div class="article">
    <div class='main'>
        <!-- 帖子视图 -->
        
        
        <!-- 更新时间 -->
        <div class="updated">
            <div></div>
            <span>该文章更新于 2022.06.24</span>
        </div>

        <div class="content markdown">
            <meta name="referrer" content="no-referrer">

<h1 id="AJAX请求"><a href="#AJAX请求" class="headerlink" title="AJAX请求"></a>AJAX请求</h1><h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h1><blockquote>
<p>AJAX 不是新的编程语言，而是一种使用现有标准的新方法。AJAX 是一种用于创建快速动态网页的技术。通过在后台与服务器进行少量数据交换，AJAX 可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。</p>
</blockquote>
<h2 id="1-常识性知识"><a href="#1-常识性知识" class="headerlink" title="1. 常识性知识"></a>1. 常识性知识</h2><h3 id="1-1-网页中如何请求数据"><a href="#1-1-网页中如何请求数据" class="headerlink" title="1.1 网页中如何请求数据"></a>1.1 网页中如何请求数据</h3><blockquote>
<p>如果要在网页中请求服务器上的数据资源，则需要用到 <code>XMLHttpRequest</code>对象。</p>
</blockquote>
<p><code>XMLHttpRequest</code>（简称 xhr）是浏览器提供的 js 成员，通过它，可以请求服务器上的数据资源。<br>最简单的用法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhrObj = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br></pre></td></tr></table></figure>
<h3 id="1-2-资源的请求方式"><a href="#1-2-资源的请求方式" class="headerlink" title="1.2 资源的请求方式"></a>1.2 资源的请求方式</h3><blockquote>
<p>客户端请求服务器时，请求的方式有很多种，最常见的两种请求方式分别为 <code>get</code>和 <code>post</code>请求。</p>
</blockquote>
<ul>
<li><p><code>get</code> 请求通常用于获取服务端资源（向服务器要资源）</p>
<p>   例如：根据 URL 地址，从服务器获取 HTML 文件、css 文件、js文件、图片文件、数据资源等</p>
</li>
</ul>
<p><code>post</code> 请求通常用于向服务器提交数据（往服务器发送资源）<br>     例如：登录时向服务器提交的登录信息、注册时向服务器提交的注册信息、添加用户时向服务器提交的      用户信息等各种数据提交操作</p>
<h3 id="1-3-get、post的区别"><a href="#1-3-get、post的区别" class="headerlink" title="1.3 get、post的区别"></a>1.3 get、post的区别</h3><blockquote>
<p>Get请求的目的是给予服务器一些参数,以便从服务器获取列表.例如:<code>list.aspx?page=1</code>,表示获取第一页的数据Post请求的目的是向服务器发送一些参数,例如form中的内容.与 POST 相比，GET 更简单也更快，并且在大部分情况下都能用。</p>
</blockquote>
<p>然而，在以下情况中，请使用 POST 请求：<br>1、无法使用缓存文件（更新服务器上的文件或数据库）<br>2、向服务器发送大量数据（ <em>POST</em> 没有数据量限制）<br>3、发送包含未知字符的用户输入时， <em>POST</em> 比 GET 更稳定也更可靠<br>若符合下列任一情况，则用<strong>GET</strong>方法：<br>1、请求是为了查找资源，HTML表单数据仅用来帮助搜索。<br>2、请求结果无持续性的副作用。<br>3、收集的数据及HTML表单内的输入字段名称的总长不超过1024个字符。</p>
<h2 id="2-jQuery中的Ajax"><a href="#2-jQuery中的Ajax" class="headerlink" title="2. jQuery中的Ajax"></a>2. jQuery中的Ajax</h2><blockquote>
<p>浏览器中提供的 <code>XMLHttpRequest</code>用法比较复杂，所以 jQuery 对 XMLHttpRequest 进行了<code>封装</code>，提供了一系列 Ajax 相关的函数，极大地降低了 Ajax 的使用难度。</p>
</blockquote>
<p>jQuery 中发起 Ajax 请求最常用的三个方法如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">get</span>()</span><br><span class="line">$.<span class="title function_">post</span>()</span><br><span class="line">$.<span class="title function_">ajax</span>()</span><br></pre></td></tr></table></figure>
<h3 id="2-1-get-的用法"><a href="#2-1-get-的用法" class="headerlink" title="2.1 $.get()的用法"></a>2.1 $.get()的用法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">get</span>(url, [data], [callback])</span><br><span class="line"><span class="string">``</span><span class="string">`*</span></span><br><span class="line"><span class="string">   url:	要请求的资源地址*</span></span><br><span class="line"><span class="string">   data:  请求资源期间要携带的参数*</span></span><br><span class="line"><span class="string">   callback:	请求成功时的回调函数</span></span><br><span class="line"><span class="string">使用`</span>  $.<span class="title function_">get</span>()  <span class="string">`函数发起不带参数的请求时，直接提供请求的 URL 地址和请求成功之后的回调函数即可，示例代码如下：</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript</span><br><span class="line">$.<span class="title function_">get</span>(<span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>, <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// 这里的 res 是服务器返回的数据</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>使用<code>$.get()</code> 函数发起带参数的请求时，示例代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">get</span>(<span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>, &#123; <span class="attr">id</span>: <span class="number">1</span> &#125;, <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="2-2-post-函数的用法"><a href="#2-2-post-函数的用法" class="headerlink" title="2.2 $.post()函数的用法"></a>2.2 $.post()函数的用法</h3><blockquote>
<p>jQuery 中 <code>$.post()</code>函数的功能单一，专门用来发起 post 请求，从而向服务器提交数据。</p>
</blockquote>
<p><code>$.post()</code>函数的语法如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">post</span>(url, [data], [callback])</span><br></pre></td></tr></table></figure>
<p>使用 $post() 向服务器提交数据的示例代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">post</span>(</span><br><span class="line">   <span class="string">&#x27;http://www.liulongbin.top:3006/api/addbook&#x27;</span>, <span class="comment">// 请求的URL地址</span></span><br><span class="line">   &#123; <span class="attr">bookname</span>: <span class="string">&#x27;水浒传&#x27;</span>, <span class="attr">author</span>: <span class="string">&#x27;施耐庵&#x27;</span>, <span class="attr">publisher</span>: <span class="string">&#x27;上海图书出版社&#x27;</span> &#125;, <span class="comment">// 提交的数据</span></span><br><span class="line">   <span class="keyword">function</span>(<span class="params">res</span>) &#123; <span class="comment">// 回调函数</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="2-3-ajax-函数的用法"><a href="#2-3-ajax-函数的用法" class="headerlink" title="2.3 $.ajax()函数的用法"></a>2.3 $.ajax()函数的用法</h3><blockquote>
<p>相比于<code>$.get()、$.post()</code>函数，jQuery 中提供的<code>$.ajax()</code>函数，是一个功能比较综合的函数，它允许我们对 <code>Ajax 请求</code>进行更详细的配置。</p>
</blockquote>
<p><code>$.ajax()</code> 函数的基本语法如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">   <span class="attr">type</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 请求的方式，例如 GET 或 POST</span></span><br><span class="line">   <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>,  <span class="comment">// 请求的 URL 地址</span></span><br><span class="line">   <span class="attr">data</span>: &#123; &#125;,<span class="comment">// 这次请求要携带的数据</span></span><br><span class="line">   <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123; &#125; <span class="comment">// 请求成功之后的回调函数</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>使用 <code>$.ajax()</code>发起 GET 请求时，只需要将 type 属性的值设置为 ‘GET’ 即可：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">   <span class="attr">type</span>: <span class="string">&#x27;GET&#x27;</span>, <span class="comment">// 请求的方式</span></span><br><span class="line">   <span class="attr">url</span>: <span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>,  <span class="comment">// 请求的 URL 地址</span></span><br><span class="line">   <span class="attr">data</span>: &#123; <span class="attr">id</span>: <span class="number">1</span> &#125;,<span class="comment">// 这次请求要携带的数据</span></span><br><span class="line">   <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123; <span class="comment">// 请求成功之后的回调函数</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>使用 <code>$.ajax()</code>发起 POST 请求时，只需要将 type 属性的值设置为 ‘POST’ 即可：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">   <span class="attr">type</span>: <span class="string">&#x27;POST&#x27;</span>, <span class="comment">// 请求的方式</span></span><br><span class="line">   <span class="attr">url</span>: <span class="string">&#x27;http://www.liulongbin.top:3006/api/addbook&#x27;</span>,  <span class="comment">// 请求的 URL 地址</span></span><br><span class="line">   <span class="attr">data</span>: &#123; <span class="comment">// 要提交给服务器的数据</span></span><br><span class="line">      <span class="attr">bookname</span>: <span class="string">&#x27;水浒传&#x27;</span>,</span><br><span class="line">      <span class="attr">author</span>: <span class="string">&#x27;施耐庵&#x27;</span>,</span><br><span class="line">      <span class="attr">publisher</span>: <span class="string">&#x27;上海图书出版社&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">   <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123; <span class="comment">// 请求成功之后的回调函数</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="3-XMLHttpRequest"><a href="#3-XMLHttpRequest" class="headerlink" title="3. XMLHttpRequest"></a>3. XMLHttpRequest</h2><blockquote>
<p><code>XMLHttpRequest</code>（简称 xhr）是浏览器提供的 Javascript 对象，通过它，可以请求服务器上的数据资源 。之前所学的 jQuery 中的 Ajax 函数，就是基于<code>xhr 对象封装</code>出来的。</p>
</blockquote>
<p><code>常用方法</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Open</span>(string method,string url,boolean asynch,<span class="title class_">String</span> username,string password)</span><br><span class="line">     <span class="comment">//指定和服务器端交互的HTTP方法，URL地址，即其他请求信息；</span></span><br><span class="line">     <span class="comment">//Method:表示http请求方法，一般使用&quot;GET&quot;,&quot;POST&quot;.</span></span><br><span class="line">     <span class="comment">//url：表示请求的服务器的地址；</span></span><br><span class="line">     <span class="comment">//asynch：表示是否采用异步方法，true为异步，false为同步；</span></span><br><span class="line">     <span class="comment">//后边两个可以不指定，username和password分别表示用户名和密码，提供http认证机制需要的用户名和密码。</span></span><br><span class="line"><span class="title class_">Send</span>(content)</span><br><span class="line">     <span class="comment">//向服务器发出请求，如果采用异步方式，该方法会立即返回。</span></span><br><span class="line">     <span class="comment">//content可以指定为null表示不发送数据，其内容可以是DOM对象，输入流或字符串。</span></span><br><span class="line"><span class="title class_">SetRequestHeader</span>(<span class="title class_">String</span> header,<span class="title class_">String</span> <span class="title class_">Value</span>)</span><br><span class="line">    <span class="comment">//设置HTTP请求中的指定头部header的值为value.</span></span><br><span class="line">    <span class="comment">//此方法需在open方法以后调用，一般在post方式中使用。</span></span><br><span class="line"><span class="title function_">getAllResponseHeaders</span>()</span><br><span class="line">    <span class="comment">//返回包含Http的所有响应头信息，其中相应头包括Content-length,date,uri等内容。</span></span><br><span class="line">    <span class="comment">//返回值是一个字符串，包含所有头信息，其中每个键名和键值用冒号分开，每一组键之间用CR和LF（回车加换行符）来分隔！</span></span><br><span class="line"><span class="title function_">getResponseHeader</span>(<span class="title class_">String</span> header)</span><br><span class="line">    <span class="comment">//返回HTTP响应头中指定的键名header对应的值</span></span><br><span class="line"><span class="title class_">Abort</span>()</span><br><span class="line">    <span class="comment">//停止当前http请求。对应的XMLHttpRequest对象会复位到未初始化的状态。</span></span><br></pre></td></tr></table></figure>
<p><code>常用属性</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">readyState</span><br><span class="line">      <span class="comment">//表示XMLHttpRequest对象的状态：0：未初始化。对象已创建，未调用open；</span></span><br><span class="line">      <span class="number">1</span>：open方法成功调用，但<span class="title class_">Sendf</span>方法未调用；</span><br><span class="line">      <span class="number">2</span>：send方法已经调用，尚未开始接受数据；</span><br><span class="line">      <span class="number">3</span>：正在接受数据。<span class="title class_">Http</span>响应头信息已经接受，但尚未接收完成；</span><br><span class="line">      <span class="number">4</span>：完成，即响应数据接受完成。</span><br><span class="line"><span class="title class_">Onreadystatechange</span></span><br><span class="line">    <span class="comment">//请求状态改变的事件触发器（readyState变化时会调用这个属性上注册的javascript函数）。</span></span><br><span class="line">responseText</span><br><span class="line">      <span class="comment">//服务器响应的文本内容</span></span><br><span class="line">responseXML</span><br><span class="line">     <span class="comment">//服务器响应的XML内容对应的DOM对象</span></span><br><span class="line"><span class="title class_">Status</span></span><br><span class="line">     <span class="comment">//服务器返回的http状态码。200表示“成功”，404表示“未找到”，500表示“服务器内部错误”等。</span></span><br><span class="line">statusText</span><br><span class="line">     <span class="comment">//服务器返回状态的文本信息。</span></span><br></pre></td></tr></table></figure>
<h3 id="3-1-使用xhr发起GET请求"><a href="#3-1-使用xhr发起GET请求" class="headerlink" title="3.1 使用xhr发起GET请求"></a>3.1 使用xhr发起GET请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 创建 XHR 对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"><span class="comment">// 2. 调用 open 函数，指定 请求方式 与 URL地址</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>)</span><br><span class="line"><span class="comment">// 3. 调用 send 函数，发起 Ajax 请求</span></span><br><span class="line">xhr.<span class="title function_">send</span>()</span><br><span class="line"><span class="comment">// 4. 监听 onreadystatechange 事件</span></span><br><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 4.1 监听 xhr 对象的请求状态 readyState ；与服务器响应的状态 status</span></span><br><span class="line">    <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// 4.2 打印服务器响应回来的数据</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-xhr对象的readyState属性"><a href="#3-2-xhr对象的readyState属性" class="headerlink" title="3.2 xhr对象的readyState属性"></a>3.2 xhr对象的readyState属性</h3><blockquote>
<p><code>XMLHttpRequest</code>对象的 readyState 属性，用来表示当前 Ajax 请求所处的状态 。每个 Ajax 请求必然处于以下状态中的一个：</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/12420419/1656060428635-f8aa3dfa-dd4f-482a-86fa-8fc9f4c438c9.png#crop=0&crop=0&crop=1&crop=1&id=GDJTa&originHeight=352&originWidth=1102&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="></p>
<h3 id="3-3-使用xhr发起带参数的GET请求"><a href="#3-3-使用xhr发起带参数的GET请求" class="headerlink" title="3.3 使用xhr发起带参数的GET请求"></a>3.3 使用xhr发起带参数的GET请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...省略不必要的代码</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://www.liulongbin.top:3006/api/getbooks?id=1&#x27;</span>)</span><br><span class="line"><span class="comment">// ...省略不必要的代码</span></span><br></pre></td></tr></table></figure>
<p>这种在 URL 地址后面拼接的参数，叫做查询字符串 。</p>
<h3 id="3-4-查询字符串"><a href="#3-4-查询字符串" class="headerlink" title="3.4 查询字符串"></a>3.4 查询字符串</h3><blockquote>
<p>定义：查询字符串（URL 参数）是指在 URL 的末尾加上用于向服务器发送信息的字符串（变量）。</p>
</blockquote>
<p>格式：将英文的<code>?</code>放在URL 的末尾，然后再加上 <code>参数＝值</code>，想加上多个参数的话，使用 <code>&amp;</code>符号进行分隔。以这个形式，可以将想要发送给服务器的数据添加到 URL 中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不带参数的 URL 地址</span></span><br><span class="line"><span class="attr">http</span>:<span class="comment">//www.liulongbin.top:3006/api/getbooks</span></span><br><span class="line"><span class="comment">// 带一个参数的 URL 地址</span></span><br><span class="line"><span class="attr">http</span>:<span class="comment">//www.liulongbin.top:3006/api/getbooks?id=1</span></span><br><span class="line"><span class="comment">// 带两个参数的 URL 地址</span></span><br><span class="line"><span class="attr">http</span>:<span class="comment">//www.liulongbin.top:3006/api/getbooks?id=1&amp;bookname=西游记</span></span><br></pre></td></tr></table></figure>
<h3 id="3-5-GET请求携带参数的本质"><a href="#3-5-GET请求携带参数的本质" class="headerlink" title="3.5 GET请求携带参数的本质"></a>3.5 GET请求携带参数的本质</h3><blockquote>
<p>无论使用<code>$.ajax()</code>，还是使用<code>$ .get()</code>，又或者<code>直接使用 xhr 对象</code>发起 GET 请求，当需要携带参数的时候，本质上，都是直接将参数以查询字符串的形式，追加到 URL 地址的后面，发送到服务器的。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">get</span>(<span class="string">&#x27;url&#x27;</span>, &#123;<span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;, <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;)</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line">$.<span class="title function_">get</span>(<span class="string">&#x27;url?name=zs&amp;age=20&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;)</span><br><span class="line">$.<span class="title function_">ajax</span>(&#123; <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>, <span class="attr">url</span>: <span class="string">&#x27;url&#x27;</span>, <span class="attr">data</span>: &#123;<span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;, <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125; &#125;)</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line">$.<span class="title function_">ajax</span>(&#123; <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>, <span class="attr">url</span>: <span class="string">&#x27;url?name=zs&amp;age=20&#x27;</span>, <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125; &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="3-6-使用xhr发起POST请求"><a href="#3-6-使用xhr发起POST请求" class="headerlink" title="3.6 使用xhr发起POST请求"></a>3.6 使用xhr发起POST请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 创建 xhr 对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"><span class="comment">// 2. 调用 open()</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;http://www.liulongbin.top:3006/api/addbook&#x27;</span>)</span><br><span class="line"><span class="comment">// 3. 设置 Content-Type 属性（固定写法）</span></span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>)</span><br><span class="line"><span class="comment">// 4. 调用 send()，同时将数据以查询字符串的形式，提交给服务器</span></span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="string">&#x27;bookname=水浒传&amp;author=施耐庵&amp;publisher=天津图书出版社&#x27;</span>)</span><br><span class="line"><span class="comment">// 5. 监听 onreadystatechange 事件</span></span><br><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-URL编码与解码"><a href="#4-URL编码与解码" class="headerlink" title="4. URL编码与解码"></a>4. URL编码与解码</h2><h3 id="4-1-什么是URL编码"><a href="#4-1-什么是URL编码" class="headerlink" title="4.1 什么是URL编码"></a>4.1 什么是URL编码</h3><blockquote>
<p>URL 地址中，只允许出现英文相关的字母、标点符号、数字，因此，在 URL 地址中不允许出现中文字符。</p>
</blockquote>
<ul>
<li>如果 URL 中需要包含中文这样的字符，则必须对中文字符进行编码 （转义）。</li>
<li>URL编码的原则：使用安全的字符（没有特殊用途或者特殊意义的可打印字符）去表示那些不安全的字符。</li>
</ul>
<p>URL编码原则的通俗理解：使用英文字符去表示非英文字符。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">http</span>:<span class="comment">//www.liulongbin.top:3006/api/getbooks?id=1&amp;bookname=西游记</span></span><br><span class="line"><span class="comment">// 经过 URL 编码之后，URL地址变成了如下格式：</span></span><br><span class="line"><span class="attr">http</span>:<span class="comment">//www.liulongbin.top:3006/api/getbooks?id=1&amp;bookname=%E8%A5%BF%E6%B8%B8%E8%AE%B0</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-如何对URL进行编码与解码"><a href="#4-2-如何对URL进行编码与解码" class="headerlink" title="4.2 如何对URL进行编码与解码"></a>4.2 如何对URL进行编码与解码</h3><blockquote>
<p>浏览器提供了 URL 编码与解码的 API，分别是：</p>
</blockquote>
<p><code>lencodeURI()</code>编码的函数<br><code>decodeURI()</code>解码的函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">encodeURI</span>(<span class="string">&#x27;黑马程序员&#x27;</span>)</span><br><span class="line"><span class="comment">// 输出字符串  %E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98</span></span><br><span class="line"><span class="built_in">decodeURI</span>(<span class="string">&#x27;%E9%BB%91%E9%A9%AC&#x27;</span>)</span><br><span class="line"><span class="comment">// 输出字符串  黑马</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-AJAX乱码问题"><a href="#4-3-AJAX乱码问题" class="headerlink" title="4.3 AJAX乱码问题"></a>4.3 AJAX乱码问题</h3><blockquote>
<p>产生乱码的原因</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">返回的数据默认的字符编码是**utf-8* *，如果客户端页面是**gb2312**或者其它编码数据就会产生乱码 &amp;#x20;***</span><br></pre></td></tr></table></figure>
<p>post<strong>方法提交数据默认的字符编码是</strong>utf-8 ，如果服务器端是<strong>gb2312</strong>或其他编码数据就会产生乱码</p>
<blockquote>
<p>解决办法有</p>
</blockquote>
<p>若客户端是<strong>gb2312</strong>编码，则在服务器指定输出流编码<br>服务器端和客户端都使用<strong>utf-8</strong>编码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gb2312</span>:<span class="title function_">header</span>(<span class="string">&#x27;Content-Type:text/html;charset=GB2312&#x27;</span>);</span><br><span class="line">utf-<span class="number">8</span>:<span class="title function_">header</span>(<span class="string">&#x27;Content-Type:text/html;charset=utf-8&#x27;</span>);</span><br><span class="line"><span class="string">``</span><span class="string">`**</span></span><br><span class="line"><span class="string">注意：**如果你已经按上面的方法做了，还是返回乱码的话,检查你的方式是否为**get* *,对于**get**请求（或凡涉及到url传递参数的），被传递的参数都要先经**encodeURIComponent**方法处理.如果没有用**encodeURIComponent**处理的话,也会产生乱码。</span></span><br><span class="line"><span class="string">## 5. JSON</span></span><br><span class="line"><span class="string">&gt; `</span><span class="title class_">JSON</span><span class="string">` 是 JS 对象的字符串表示法，它使用文本表示一个 `</span><span class="variable constant_">JS</span> 对象的信息<span class="string">`，本质是一个`</span>字符串<span class="string">`。例如：</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>json</span><br><span class="line"><span class="comment">//这是一个对象</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;World&#x27;</span>&#125;</span><br><span class="line"><span class="comment">//这是一个 JSON 字符串，本质是一个字符串</span></span><br><span class="line"><span class="keyword">var</span> json = <span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="5-1-JSON和JS对象的互转"><a href="#5-1-JSON和JS对象的互转" class="headerlink" title="5.1 JSON和JS对象的互转:"></a>5.1 JSON和JS对象的互转:</h3><blockquote>
<p>要实现从 JSON 字符串转换为 JS 对象，使用<code>JSON.parse()</code>方法：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>)</span><br><span class="line"><span class="comment">//结果是 &#123;a: &#x27;Hello&#x27;, b: &#x27;World&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>要实现从 JS 对象转换为 JSON 字符串，使用 <code>JSON.stringify()</code>方法：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> json = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;<span class="attr">a</span>: <span class="string">&#x27;Hello&#x27;</span>, <span class="attr">b</span>: <span class="string">&#x27;World&#x27;</span>&#125;)</span><br><span class="line"><span class="comment">//结果是 &#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="5-2-序列化和反序列化"><a href="#5-2-序列化和反序列化" class="headerlink" title="5.2 序列化和反序列化"></a>5.2 序列化和反序列化</h3><blockquote>
<p> 把数据对象转换为字符串的过程 ，叫做序列化 ，例如：<code>调用 JSON.stringify() 函数</code>的操作，叫做 JSON 序列化。<br> 把字符串转换为数据对象的过程 ，叫做反序列化 ，例如：<code>调用 JSON.parse() 函数</code>的操作，叫做 JSON 反序列化。</p>
</blockquote>
<h2 id="6-XMLHttpRequest-Level2"><a href="#6-XMLHttpRequest-Level2" class="headerlink" title="6. XMLHttpRequest Level2"></a>6. XMLHttpRequest Level2</h2><blockquote>
<p>旧版<strong>XMLHttpRequest</strong>的缺点</p>
</blockquote>
<p>只支持文本数据的传输，无法用来读取和上传文件<br>传送和接收数据时，没有进度信息，只能提示有没有完成</p>
<blockquote>
<p>XMLHttpRequest Level2的新功能</p>
</blockquote>
<p>可以设置 HTTP 请求的时限<br>可以使用 FormData 对象管理表单数据<br>可以上传文件<br>可以获得数据传输的进度信息</p>
<h3 id="6-1-设置HTTP请求时限"><a href="#6-1-设置HTTP请求时限" class="headerlink" title="6.1 设置HTTP请求时限"></a>6.1 设置HTTP请求时限</h3><blockquote>
<p>有时，Ajax 操作很耗时，而且无法预知要花多少时间。如果网速很慢，用户可能要等很久。新版本的 XMLHttpRequest 对象，增加了 timeout 属性，可以设置 HTTP 请求的时限：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">timeout</span> = <span class="number">3000</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>上面的语句，将最长等待时间设为 3000 毫秒。过了这个时限，就自动停止HTTP请求。与之配套的还有一个 timeout 事件，用来指定回调函数：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">ontimeout</span> = <span class="keyword">function</span>(<span class="params">event</span>)&#123;</span><br><span class="line">     <span class="title function_">alert</span>(<span class="string">&#x27;请求超时！&#x27;</span>)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-2-FormData对象管理表单数据"><a href="#6-2-FormData对象管理表单数据" class="headerlink" title="6.2 FormData对象管理表单数据"></a>6.2 FormData对象管理表单数据</h3><blockquote>
<p>Ajax 操作往往用来提交表单数据。为了方便表单处理，<code>HTML5 新增了一个 FormData 对象</code>，可以模拟表单操作：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 新建 FormData 对象</span></span><br><span class="line"><span class="keyword">var</span> fd = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span><br><span class="line"><span class="comment">// 2. 为 FormData 添加表单项</span></span><br><span class="line">fd.<span class="title function_">append</span>(<span class="string">&#x27;uname&#x27;</span>, <span class="string">&#x27;zs&#x27;</span>)</span><br><span class="line">fd.<span class="title function_">append</span>(<span class="string">&#x27;upwd&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line"><span class="comment">// 3. 创建 XHR 对象</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"><span class="comment">// 4. 指定请求类型与URL地址</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;http://www.liulongbin.top:3006/api/formdata&#x27;</span>)</span><br><span class="line"><span class="comment">// 5. 直接提交 FormData 对象，这与提交网页表单的效果，完全一样</span></span><br><span class="line">xhr.<span class="title function_">send</span>(fd)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>FormData对象也可以用来获取网页表单的值，示例代码如下：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取表单元素</span></span><br><span class="line"> <span class="keyword">var</span> form = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#form1&#x27;</span>)</span><br><span class="line"> <span class="comment">// 监听表单元素的 submit 事件</span></span><br><span class="line"> form.<span class="title function_">addEventListener</span>(<span class="string">&#x27;submit&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>()</span><br><span class="line">     <span class="comment">// 根据 form 表单创建 FormData 对象，会自动将表单数据填充到 FormData 对象中</span></span><br><span class="line">     <span class="keyword">var</span> fd = <span class="keyword">new</span> <span class="title class_">FormData</span>(form)</span><br><span class="line">     <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">     xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;http://www.liulongbin.top:3006/api/formdata&#x27;</span>)</span><br><span class="line">     xhr.<span class="title function_">send</span>(fd)</span><br><span class="line">     xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="7-axios"><a href="#7-axios" class="headerlink" title="7. axios"></a>7. axios</h2><blockquote>
<p>Axios 是一个基于 <code>promise</code>网络请求库，作用于<code>node.js 和浏览器中</code>。在服务器端（Node），它依赖于本地<code>Node.js HTTP</code>模块，而在客户端（浏览器），它使用<code>XMLHttpRequests</code>。由于是同构的，Axios是少数几个在浏览器和服务器端都可以毫不费力地使用的库之一。</p>
</blockquote>
<h3 id="7-1-axios发起GET请求"><a href="#7-1-axios发起GET请求" class="headerlink" title="7.1 axios发起GET请求"></a>7.1 axios发起GET请求</h3><blockquote>
<p>axios 发起 get 请求的语法：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;url&#x27;</span>, &#123; <span class="attr">params</span>: &#123; <span class="comment">/* 参数 */</span> &#125; &#125;).<span class="title function_">then</span>(callback)</span><br></pre></td></tr></table></figure>
<p>具体的请求示例如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求的 URL 地址</span></span><br><span class="line"> <span class="keyword">var</span> url = <span class="string">&#x27;http://www.liulongbin.top:3006/api/get&#x27;</span></span><br><span class="line"> <span class="comment">// 请求的参数对象</span></span><br><span class="line"> <span class="keyword">var</span> paramsObj = &#123; <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;</span><br><span class="line"> <span class="comment">// 调用 axios.get() 发起 GET 请求</span></span><br><span class="line"> axios.<span class="title function_">get</span>(url, &#123; <span class="attr">params</span>: paramsObj &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">     <span class="comment">// res.data 是服务器返回的数据</span></span><br><span class="line">     <span class="keyword">var</span> result = res.<span class="property">data</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="7-2-axios发起POST请求"><a href="#7-2-axios发起POST请求" class="headerlink" title="7.2 axios发起POST请求"></a>7.2 axios发起POST请求</h3><blockquote>
<p>axios 发起 post 请求的语法：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;url&#x27;</span>, &#123; <span class="comment">/* 参数 */</span> &#125;).<span class="title function_">then</span>(callback)</span><br></pre></td></tr></table></figure>
<p>具体的请求示例如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求的 URL 地址</span></span><br><span class="line"> <span class="keyword">var</span> url = <span class="string">&#x27;http://www.liulongbin.top:3006/api/post&#x27;</span></span><br><span class="line"> <span class="comment">// 要提交到服务器的数据</span></span><br><span class="line"> <span class="keyword">var</span> dataObj = &#123; <span class="attr">location</span>: <span class="string">&#x27;北京&#x27;</span>, <span class="attr">address</span>: <span class="string">&#x27;顺义&#x27;</span> &#125;</span><br><span class="line"> <span class="comment">// 调用 axios.post() 发起 POST 请求</span></span><br><span class="line"> axios.<span class="title function_">post</span>(url, dataObj).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">     <span class="comment">// res.data 是服务器返回的数据</span></span><br><span class="line">     <span class="keyword">var</span> result = res.<span class="property">data</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="7-3-直接使用axios发起请求"><a href="#7-3-直接使用axios发起请求" class="headerlink" title="7.3 直接使用axios发起请求"></a>7.3 直接使用axios发起请求</h3><blockquote>
<p>axios 也提供了类似于 jQuery 中 $.ajax() 的函数，语法如下：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">     <span class="attr">method</span>: <span class="string">&#x27;请求类型&#x27;</span>,</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;请求的URL地址&#x27;</span>,</span><br><span class="line">     <span class="attr">data</span>: &#123; <span class="comment">/* POST数据 */</span> &#125;,</span><br><span class="line">     <span class="attr">params</span>: &#123; <span class="comment">/* GET参数 */</span> &#125;</span><br><span class="line"> &#125;) .<span class="title function_">then</span>(callback)</span><br><span class="line"><span class="comment">//直接使用**axios**发起**GET请求</span></span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">     <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;http://www.liulongbin.top:3006/api/get&#x27;</span>,</span><br><span class="line">     <span class="attr">params</span>: &#123; <span class="comment">// GET 参数要通过 params 属性提供</span></span><br><span class="line">         <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">         <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">     &#125;</span><br><span class="line"> &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line"> &#125;)</span><br><span class="line"><span class="comment">//直接使用axios发起POST**请求</span></span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">     <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">     <span class="attr">url</span>: <span class="string">&#x27;http://www.liulongbin.top:3006/api/post&#x27;</span>,</span><br><span class="line">     <span class="attr">data</span>: &#123; <span class="comment">// POST 数据要通过 data 属性提供</span></span><br><span class="line">         <span class="attr">bookname</span>: <span class="string">&#x27;程序员的自我修养&#x27;</span>,</span><br><span class="line">         <span class="attr">price</span>: <span class="number">666</span></span><br><span class="line">     &#125;</span><br><span class="line"> &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<h2 id="8-跨域和JSONP"><a href="#8-跨域和JSONP" class="headerlink" title="8. 跨域和JSONP"></a>8. 跨域和JSONP</h2><h3 id="8-1同源"><a href="#8-1同源" class="headerlink" title="8.1同源"></a>8.1同源</h3><blockquote>
<p>如果两个页面的协议，域名和端口都相同，则两个页面具有相同的源 。</p>
</blockquote>
<p>例如，下表给出了相对于 <a target="_blank" rel="noopener" href="http://_www.test.com_index/">http://www.test.com/index.html</a> 页面的同源检测（默认80端口）：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/12420419/1656060428787-c72777e9-a209-4c4f-9793-d70564664ebc.png#crop=0&crop=0&crop=1&crop=1&id=wmJCT&originHeight=338&originWidth=1195&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="></p>
<blockquote>
<p>同源策略 （英文全称 Same origin policy）是浏览器提供的一个安全功能。</p>
</blockquote>
<ul>
<li>MDN 官方给定的概念：同源策略限制了从同一个源加载的文档或脚本如何与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的重要安全机制。</li>
</ul>
<p>通俗的理解：浏览器规定，A 网站的 JavaScript，不允许和非同源的网站 C 之间，进行资源的交互，例如：无法读取非同源网页的 Cookie、LocalStorage 和 IndexedDB;无法接触非同源网页的 DOM;无法向非同源地址发送 Ajax 请求</p>
<h3 id="8-2-跨域"><a href="#8-2-跨域" class="headerlink" title="8.2 跨域"></a>8.2 跨域</h3><blockquote>
<p>同源<strong>指的是两个 URL 的协议、域名、端口一致，反之，则是</strong>跨域 。出现跨域的根本原因： 浏览器的同源策略不允许非同源的 URL 之间进行资源的交互。</p>
</blockquote>
<p>下面这两个页面跨域<br>网页：<a target="_blank" rel="noopener" href="http://_www.test.com_index/">http://www.test.com/index.html</a><br>接口：<a target="_blank" rel="noopener" href="http://www.api.com/userlist">http://www.api.com/userlist</a><br><img src="https://cdn.nlark.com/yuque/0/2022/png/12420419/1656060428959-16cffd43-22db-4ad1-9a99-0f9146bda90d.png#crop=0&crop=0&crop=1&crop=1&id=w3Mo9&originHeight=450&originWidth=1161&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="></p>
<h3 id="8-3-如何实现跨域数据请求"><a href="#8-3-如何实现跨域数据请求" class="headerlink" title="8.3 如何实现跨域数据请求"></a>8.3 如何实现跨域数据请求</h3><blockquote>
<p>现如今，实现跨域数据请求，最主要的两种解决方案，分别是 <code>JSONP</code>和 <code>CORS</code>。跨域主要是后端来解决，jsonp缺陷太大，基本上不使用。</p>
</blockquote>
<ul>
<li>JSONP：出现的早，兼容性好（兼容低版本IE）。是前端程序员为了解决跨域问题，被迫想出来的一种临时解决方案。缺点是<code>只支持 GET 请求</code>，不支持 POST 请求。</li>
</ul>
<p>CORS：出现的较晚，它是 W3C 标准，属于<strong>请求的</strong> 。支持 GET 和 POST 请求。缺点是不兼容某些低版本的浏览器。</p>
<h3 id="8-4-防抖与节流"><a href="#8-4-防抖与节流" class="headerlink" title="8.4 防抖与节流"></a>8.4 防抖与节流</h3><p>防抖策略 （debounce）是当事件被触发后，延迟 n 秒后再执行回调，如果在这 n 秒内事件又被触发，则重新计时。<br><code>应用场景：</code></p>
<blockquote>
<p>用户在输入框中连续输入一串字符时，可以通过防抖策略，只在输入完后，才执行查询的请求，这样可以有效减少请求次数，节约请求资源；</p>
</blockquote>
<ul>
<li>节流策略 （throttle），顾名思义，可以减少一段时间内事件的触发频率。</li>
</ul>
<p>①鼠标连续不断地触发某事件（如点击），只在单位时间内只触发一次；<br>②懒加载时要监听计算滚动条的位置，但不必每次滑动都触发，可以降低计算的频率，而不必去浪费 CPU 资源；<br><code>应用场景</code></p>
<blockquote>
<p> 控制轮播图的速度</p>
</blockquote>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="http://domain.com/awesome.mp3">
            </audio>
            
        </div>
        </br></br></br>
        <center style="color: #cccccc;">-&nbsp;&nbsp;&nbsp;END&nbsp;&nbsp;&nbsp;-</center>
        
    <div id='gitalk-container' class="comment link"
		data-enable='true'
        data-ae='true'
        data-ci='7c40969f9ae1f09ec22f'
        data-cs='d6dce2a6144e46354524fc0abcff5bf854690061'
        data-r='hopesy.github.io'
        data-o='hopesy'
        data-a='hopesy'
        data-d='true'
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
    <!--�������Ц����-->
<script type="text/javascript" src="\js\FunnyTitle.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":-15,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>
<script src="/js/codeCopy.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
